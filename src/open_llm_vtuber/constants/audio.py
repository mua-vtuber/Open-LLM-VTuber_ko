"""
오디오 처리 관련 상수 모듈.

이 모듈은 WAV 파일 처리, PCM 오디오 변환, VAD(음성 활동 감지) 등
오디오 관련 작업에서 사용되는 상수들을 정의합니다.

참고:
    - ASRInterface의 SAMPLE_RATE, NUM_CHANNELS, SAMPLE_WIDTH는 별도로 유지됩니다.
    - 이 상수들은 순환 import를 방지하기 위해 다른 모듈에 의존하지 않습니다.

사용 예시:
    from src.open_llm_vtuber.constants.audio import (
        WAV_HEADER_SIZE_BYTES,
        INT16_TO_FLOAT32_DIVISOR,
        FLOAT32_TO_INT16_MULTIPLIER,
    )
"""

# =============================================================================
# WAV 파일 관련 상수
# =============================================================================

# 표준 WAV 파일 헤더 크기 (바이트)
# WAV 파일 형식: RIFF 헤더(12) + fmt 청크(24) + data 청크 헤더(8) = 44 바이트
WAV_HEADER_SIZE_BYTES: int = 44


# =============================================================================
# PCM 오디오 변환 상수
# =============================================================================

# 16비트 부호 있는 정수(int16)를 32비트 부동소수점(float32)으로 변환할 때 사용하는 제수
# int16 범위: -32768 ~ 32767 → float32 범위: -1.0 ~ ~0.99997
# 변환 공식: float_value = int16_value / 32768.0
INT16_TO_FLOAT32_DIVISOR: float = 32768.0

# 32비트 부동소수점(float32)을 16비트 부호 있는 정수(int16)로 변환할 때 사용하는 승수
# float32 범위: -1.0 ~ 1.0 → int16 범위: -32767 ~ 32767
# 변환 공식: int16_value = int(float_value * 32767)
# 주의: 32767을 사용하여 대칭적인 양수/음수 범위를 유지
FLOAT32_TO_INT16_MULTIPLIER: int = 32767


# =============================================================================
# VAD (Voice Activity Detection) 관련 상수
# =============================================================================

# Silero VAD 16kHz 샘플 레이트용 윈도우 크기 (샘플 수)
# 512 샘플 = 32ms @ 16kHz
VAD_WINDOW_SIZE_16KHZ: int = 512

# Silero VAD 8kHz 샘플 레이트용 윈도우 크기 (샘플 수)
# 256 샘플 = 32ms @ 8kHz
VAD_WINDOW_SIZE_8KHZ: int = 256


# =============================================================================
# Export 목록
# =============================================================================

__all__ = [
    "WAV_HEADER_SIZE_BYTES",
    "INT16_TO_FLOAT32_DIVISOR",
    "FLOAT32_TO_INT16_MULTIPLIER",
    "VAD_WINDOW_SIZE_16KHZ",
    "VAD_WINDOW_SIZE_8KHZ",
]
